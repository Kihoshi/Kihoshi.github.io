(this["webpackJsonpreact-axios-typescript-example"]=this["webpackJsonpreact-axios-typescript-example"]||[]).push([[0],{158:function(t,e,a){},159:function(t,e,a){},260:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a(19),c=a.n(o),i=a(110),r=(a(157),a(158),a(133)),s=a(134),l=a(151),u=a(149),d=a(20),j=(a(159),a(40)),h=a(271),p=a(272),g=a(71),b=a(41),m=a(270),O=a(269),f=a(268),x=a(77),v=a(50),y=a(265),M=a(266),N=a(273),k=a(267),C=(a(160),a(39)),S=a.n(C),w=a(136),T=a(137),F=a(138),E=a(16),I=S.a.icon(Object(v.a)(Object(v.a)({},S.a.Icon.Default.prototype.options),{},{iconUrl:w.a,iconRetinaUrl:F.a,shadowUrl:T.a}));S.a.Marker.prototype.options.icon=I;var q=S.a.icon({iconUrl:"https://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|2ecc71&chf=a,s,ee00FFFF"});function B(t){var e=t.coords;return Object(y.a)().setView(e,13),null}var L,U=function(t){var e=t.coords,a=t.drivers;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(M.a,{classsName:"map",center:e,zoom:13,scrollWheelZoom:!1,children:[Object(E.jsx)(N.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(E.jsx)(B,{coords:e}),Object(E.jsx)(k.a,{position:e}),a.length>0?a.map((function(t,e){return Object(E.jsx)(k.a,{position:[t.location.latitude,t.location.longitude],icon:q},"driver"+e)})):""]})})},P=a(111),V=a.n(P),_=a(139),z=a.n(_),D={0:"1",10:"10",20:"20"},J=[{locationName:"Singapore",latitude:1.285194,longitude:103.8522982,value:"sg"},{locationName:"London",latitude:51.5049375,longitude:-.0964509,value:"uk"}],A=h.a.Option,R=function(t){var e=Object(n.useState)("sg"),a=Object(j.a)(e,2),o=a[0],c=a[1],i=Object(n.useState)([1.285194,103.8522982]),r=Object(j.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)([]),d=Object(j.a)(u,2),v=d[0],y=(d[1],Object(n.useState)(4)),M=Object(j.a)(y,2),N=M[0],k=M[1],C=Object(n.useState)(!1),S=Object(j.a)(C,2),w=S[0],T=S[1];function F(t){l([t.coords.latitude,t.coords.longitude]),T(!1)}function I(t){var e=t.coords.latitude,a=t.coords.longitude,n=0,o="";J.map((function(t){var c=function(t,e){var a=q(t[1]),n=q(t[0]),o=q(e[1]),c=q(e[0]),i=c-n,r=o-a,s=Math.pow(Math.sin(i/2),2)+Math.cos(n)*Math.cos(c)*Math.pow(Math.sin(r/2),2);return 2*Math.asin(Math.sqrt(s))*6371*1e3}([e,a],[t.latitude,t.longitude]);return(0===n||n>c)&&(n=c,o=t.value),t})),c(""),c(o),T(!1)}function q(t){return t*Math.PI/180}function B(t,e,a){z.a.get("http://localhost:3031/getDriver",{params:{latitude:t,longitude:e,count:N}}).then((function(t){console.log("res"),console.log(t),t.data.err&&p.a.error({title:"This is an error message",content:t.data.message})})).catch((function(t){console.log("err"),console.log(t)}))}return Object(n.useEffect)((function(){var t=setInterval((function(){B(s[0],s[1],"abc")}),5e4);return function(){return clearInterval(t)}})),Object(n.useEffect)((function(){!function(){var t=V.a.find(J,{value:o});!1===V.a.isEmpty(t)&&(l([t.latitude,t.longitude]),B(t.latitude,t.longitude,"efg"))}()}),[o]),Object(E.jsx)("div",{children:Object(E.jsxs)(g.a,{className:"mainBg",gutter:16,children:[Object(E.jsxs)(b.a,{span:6,offset:6,children:[Object(E.jsx)("h1",{className:"headerText",children:"Find Taxi"}),Object(E.jsx)(g.a,{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis deleniti vitae, iusto incidunt exercitationem sint porro, eius tempora harum, quidem accusamus natus hic quam est odio amet quos aspernatur officiis."}),Object(E.jsx)(g.a,{gutter:16,className:"margin-10px",children:Object(E.jsx)("h2",{children:"Office Location"})}),Object(E.jsx)(h.a,{defaultValue:"sg",value:o,style:{width:120},onChange:function(t){c(t)},children:J.map((function(t,e){return Object(E.jsx)(A,{value:t.value,children:t.locationName},"location"+e)}))}),Object(E.jsx)(g.a,{gutter:16,className:"margin-10px",children:Object(E.jsx)("h2",{children:"Show no. of Taxi"})}),Object(E.jsx)(m.a,{marks:D,defaultValue:4,min:1,max:20,onChange:function(t){clearTimeout(L),L=setTimeout((function(){var e;e=t,B(s[0],s[1]),k(e)}),1e3)}})]}),Object(E.jsx)(b.a,{span:8,children:Object(E.jsxs)(O.a,{title:"Search Taxi",children:[Object(E.jsx)(f.a,{spinning:w,children:Object(E.jsx)(U,{coords:s,drivers:v})}),Object(E.jsx)(x.a,{loading:w,className:"margin-10px",onClick:function(){T(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(I)},children:"Back to Nearest Office"}),Object(E.jsx)(x.a,{loading:w,className:"margin-10px",onClick:function(){T(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(F)},children:"Back to My Current Location"})]})})]})})},W=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(E.jsx)("div",{children:Object(E.jsx)(d.a,{exact:!0,path:["/"],component:R})})}}]),a}(n.Component);c.a.render(Object(E.jsx)(i.a,{children:Object(E.jsx)(W,{})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.de76b99c.chunk.js.map